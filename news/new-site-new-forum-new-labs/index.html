<!DOCTYPE html>
<html lang="en" dir="auto">
<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>New Site, New Forum, New Alchitry Labs</title>


<meta name="keywords" content="keyword1, keyword2, keyword3">



<meta name="description" content="">



<meta name="author" content="Justin Rajewski">


<link rel="canonical" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;new-site-new-forum-new-labs&#x2F;">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://alchitry.com/css/styles.css">
<link rel="stylesheet" href="https://alchitry.com/css/override.css">


<link rel="icon" href="https://alchitry.com/favicon.svg" type="image/svg+xml">
<link rel="icon" type="image/png" sizes="16x16" href="https://alchitry.com/favicon_16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://alchitry.com/favicon_32.png">
<link rel="apple-touch-icon" href="https://alchitry.com/apple-touch-icon.png"><!-- 180×180 -->
<meta name="theme-color" content="#333333">


<link rel="alternate" type="application/atom+xml" title="RSS" href="https://alchitry.com/atom.xml">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
    
</noscript>



    
</head>
<body class=" dark" id="top">
    
    
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"/>

<header class="header">

    <nav class="nav">
        <div class="logo">
            <a href="https:&#x2F;&#x2F;alchitry.com" accesskey="h" title="Alchitry (Alt + H)"><img src="https://alchitry.com/alchitry.svg"
                                                         alt="Alchitry"
                                                         aria-label="Alchitry">
            </a>
        </div>
        
        <div id="nav-search">
            <ul id="menu" class="desktop-nav">
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;shop.alchitry.com&#x2F;collections&#x2F;products" title="Boards">
                        <span>Boards</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;news" title="News">
                        <span>News</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;tutorials" title="Tutorials">
                        <span>Tutorials</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;alchitry-labs" title="Alchitry Labs">
                        <span>Alchitry Labs</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;forum.alchitry.com" title="Forum">
                        <span>Forum</span>
                        
                    </a>
                </li>
                
            </ul>
            <div class="search-container">
                <input class="search" type="search" placeholder="Search" autocomplete="off">
                <span class="material-symbols-outlined search-icon">search</span>

                <div class="search-results">
                    <div class="search-results__items"></div>
                </div>
            </div>
        </div>
        <div id="overlayNavOpen">
            <span onclick="openNav()" class="material-symbols-outlined">menu</span>
        </div>
        
    </nav>
</header>


<div id="overlayNav" class="overlay">
    <div class="overlay-header">
        <div class="search-container">
            <input class="search" type="search" placeholder="Search" autocomplete="off">
            <span class="material-symbols-outlined search-icon">search</span>

            <div class="search-results">
                <div class="search-results__items"></div>
            </div>
        </div>
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    </div>

    <div class="overlay-content">
        
        
        
        <a href="https:&#x2F;&#x2F;shop.alchitry.com&#x2F;collections&#x2F;products" title="Boards">
            <span>Boards</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;news" title="News">
            <span>News</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;tutorials" title="Tutorials">
            <span>Tutorials</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;alchitry-labs" title="Alchitry Labs">
            <span>Alchitry Labs</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;forum.alchitry.com" title="Forum">
            <span>Forum</span>
            
        </a>
        
    </div>
</div>

    
    <main class="main">
        
<article class="post-single">
    <header class="post-header">
        <div class="breadcrumbs">
            
            <div class="breadcrumb-container">
                <a class="breadcrumb-path" href="/">Home</a>
                
                
                
                
                
                <span class="breadcrumb-separator">»</span>
                
                <a class="breadcrumb-path" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;">News</a>
                
                <span class="breadcrumb-separator">»</span>
                <a class="breadcrumb-path active" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;new-site-new-forum-new-labs&#x2F;">New Site, New Forum, New Alchitry Labs</a>
            </div>
            
        </div>
        <h1 class="post-title">New Site, New Forum, New Alchitry Labs</h1>
        
        
        <div class="post-meta">
            
















<span>2024-03-26</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Justin Rajewski

            &nbsp;|&nbsp;&nbsp;<a href="https:&#x2F;&#x2F;github.com&#x2F;alchitry&#x2F;alchitry.github.io&#x2F;tree&#x2F;master/content/news&#x2F;new-site-new-forum-new-labs.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

        </div>
        
    </header>

    
    

<div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner">
            <ul>
                
                <li>
                    <a href="#new-website" aria-label="New Website">New Website</a>
                    
                </li>
                
                <li>
                    <a href="#new-forum" aria-label="New Forum">New Forum</a>
                    
                </li>
                
                <li>
                    <a href="#alchitry-labs-2-0-7" aria-label="Alchitry Labs 2.0.7">Alchitry Labs 2.0.7</a>
                    
                    <ul>
                    
                        <li>
                            <a href="#syntax-changes" aria-label="Syntax Changes">Syntax Changes</a>
                            
                        </li>
                    
                        <li>
                            <a href="#new-component-library" aria-label="New Component Library">New Component Library</a>
                            
                        </li>
                    
                        <li>
                            <a href="#new-project-format" aria-label="New Project Format">New Project Format</a>
                            
                        </li>
                    
                        <li>
                            <a href="#undefinedvalues" aria-label="UndefinedValues">UndefinedValues</a>
                            
                        </li>
                    
                    </ul>
                    
                </li>
                
            </ul>
        </div>
    </details>
</div>


    

    
    <div class="post-content">
        <p>A lot has happened since the last blog post!</p>
<p>First lets start with the page you're reading this on, the new website!</p>
<span id="continue-reading"></span><h2 id="new-website">New Website<a class="anchor" aria-hidden="true" href="#new-website" hidden="">#</a>
</h2>
<p>As you can tell, the website has been updated. It's in the process of migrating from a Square Space to GitHub Pages. </p>
<p>Over the years I've used many different platforms for the website. </p>
<p>Back when we still sold boards directly, it was hosted on Shopify. However, once I no longer needed a shopping card, I moved it to Square Space.</p>
<p>Square Space is fine, but it is kind of a pain to work with their backend to create new pages. Too many times I accidentally hit back on my mouse only to lose all the content I was working on. I started writing everything locally then moving it to the site only after I was done.</p>
<p>Another major pain point I've always had was using html tags to format the pages. All the code blocks you see on the old website were typed <code>&lt;pre&gt;</code> tags that would get highlighted on page load by some JavaScript.</p>
<p>This could be really cumbersome to write out making writing tutorials less appealing.</p>
<p>This brings me to the current solution, using <a href="https://www.getzola.org/">Zola</a> and <a href="https://pages.github.com/">GitHub Pages</a>.</p>
<p>Zola is an interesting piece of software that turns a collection of <a href="https://www.markdownguide.org/">Markdown</a> pages into a static website. This means instead of having to write all the HTML tags, I can instead just write Markdown which is much faster/enjoyable.</p>
<p>This also means the site is faster as there is nothing else for the server to do other than cough up the page you asked for. The syntax highlighting is done during the conversion so your browser doesn't need to run any JS to do the highlighting either.</p>
<p>The source for the website is on a public <a href="https://github.com/alchitry/alchitry.github.io">GitHub repo</a>. If you ever discover something you think should be changed, you can create a pull request with the change and making it live is then as simple as accepting the request.</p>
<p>I'm currently in the process of porting over all the old pages so most of the pages still just link to the old Square Space site. I hope to have this done by the end of the week.</p>
<p>Let me know what you think of the new site over at the <a href="https://forum.alchitry.com/">new forum</a>!</p>
<h2 id="new-forum">New Forum<a class="anchor" aria-hidden="true" href="#new-forum" hidden="">#</a>
</h2>
<p>For quite some time, the forum we had was closed down (read-only). I did this for two main reasons, spam was rampant and I was bad about checking it and responding to posts.</p>
<p>It was easier for me to just answer emails. However, some things are nice to have in a public place.</p>
<p>I spent some time last week setting up a <a href="https://www.discourse.org/">Discourse</a> forum and porting over the data from the old MyBB forum.</p>
<p>If you had an account on the old forum and posted something, your account should still exist on the new forum.</p>
<p>All the old posts are now in the <em>Legacy Posts</em> category and are still read-only. The formatting of some of the posts didn't transfer perfectly but at least all the information is still there.</p>
<p>There are now new categories that you can post to and I should get a notification when this happens.</p>
<p>Discourse also seems to handle the spam substantially better than anything I've tried before. The forum has already been hit with quite a few spam  sign ups but most of them never got to post anything. The ones that did manage to post are very easy to clean up.</p>
<p>Hopefully this time around the forum will be a great place to ask questions and get answers.</p>
<h2 id="alchitry-labs-2-0-7">Alchitry Labs 2.0.7<a class="anchor" aria-hidden="true" href="#alchitry-labs-2-0-7" hidden="">#</a>
</h2>
<p>There have also been some new releases of <a href="https://alchitry.com/Alchitry-Labs-V2/download.html">Alchitry Labs</a>.</p>
<p>Since the last blog post about 2.0.5 there have been some major under the hood upgrades.</p>
<p>Apart for the typical bug fixes, 2.0.6 brought in basic auto-complete to make life a little easier when writing Lucid.</p>
<p>2.0.7 is where most of the updates happened.</p>
<h3 id="syntax-changes">Syntax Changes<a class="anchor" aria-hidden="true" href="#syntax-changes" hidden="">#</a>
</h3>
<p>First off, there were a couple of syntax tweaks to Lucid V2.</p>
<p>The grammar was updated to allow for trailing commas in lists. </p>
<p>For example...</p>
<pre data-lang="lucid" style="background-color:#282828;color:#ffffff;" class="language-lucid "><code class ="language-lucid" data-lang="lucid"><span style="font-weight:bold;color:#faac1f;">module</span><span> myModule </span><span style="color:#ed4343;">(
</span><span>    </span><span style="color:#0a8dbf;">input</span><span> clk</span><span style="color:#ed4343;">,
</span><span>    </span><span style="color:#0a8dbf;">input</span><span> rst</span><span style="color:#ed4343;">,
</span><span>    </span><span style="color:#0a8dbf;">output</span><span> out</span><span style="color:#ed4343;">, </span><span style="color:#969696;">// &lt;=== trailing comma used to be a syntax error
</span><span style="color:#ed4343;">)
</span></code></pre>
<p>A small breaking change renamed <code>$widthOf()</code> to <code>$width()</code>. I just felt like the <em>Of</em> portion didn't really fit.</p>
<h3 id="new-component-library">New Component Library<a class="anchor" aria-hidden="true" href="#new-component-library" hidden="">#</a>
</h3>
<p>When I went to port the components from the <em>Component Library</em> over I wanted to structure things a bit differently.</p>
<p>The old version threw all the components into a single folder and used an XML file to provide information about them. This method didn't scale very well and adding new files was annoying.</p>
<p>The new version instead puts all the information about a component into a special JSON style comment in the component itself.</p>
<p>For example, here is the header for the <code>wave</code> component.</p>
<pre data-lang="lucid" style="background-color:#282828;color:#ffffff;" class="language-lucid "><code class ="language-lucid" data-lang="lucid"><span style="color:#969696;">/**  
</span><span style="color:#969696;">    &quot;name&quot; : &quot;Wave&quot;,  
</span><span style="color:#969696;">    &quot;description&quot; : &quot;Fancy wave effect for 8 LEDs. This is the module used in the default configuration that ships on the Alchitry boards.&quot;  
</span><span style="color:#969696;">**/
</span></code></pre>
<p>When loading in the components, Alchitry Labs looks for the <code>/** **/</code> block (note the double star) and interprets this a JSON.</p>
<p>This comment is then stripped out so it is never seen by the user.</p>
<p>A component's category is determined by the directory structure making them much more organized.</p>
<p>This isn't implemented yet, but it will also automatically determine the dependencies of each component. This was all explicitly written in the XML file before.</p>
<p>All of this drastically simplifies adding new components but perhaps more importantly, it makes it much easier to add support for user created components.</p>
<p>User created components was something I would get request for fairly frequently but never implemented because of how complex it could be to correctly add a component.  In a future release, I'll implement this likely as simply checking for components in a <code>components</code> folder in the workspace directory.</p>
<h3 id="new-project-format">New Project Format<a class="anchor" aria-hidden="true" href="#new-project-format" hidden="">#</a>
</h3>
<p>Since I was getting familiar with <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-k-serializer/">KSerializer</a>  for doing the JSON parsing, it seemed like a good time to revisit the old XML style project files.</p>
<p>Here's the original <em>Base Project</em> .alp file.</p>
<pre data-lang="xml" style="background-color:#282828;color:#ffffff;" class="language-xml "><code class ="language-xml" data-lang="xml"><span style="color:#5fb3b3;">&lt;?</span><span style="color:#eb606b;">xml </span><span style="color:#bb80b3;">version</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;1.0&quot; </span><span style="color:#bb80b3;">encoding</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;UTF-8&quot;</span><span style="color:#5fb3b3;">?&gt;  
</span><span style="color:#5fb3b3;">&lt;</span><span style="color:#eb606b;">project </span><span style="color:#bb80b3;">name</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;Base Project&quot; </span><span style="color:#bb80b3;">board</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;Alchitry Au&quot; </span><span style="color:#bb80b3;">language</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;Lucid&quot; </span><span style="color:#bb80b3;">version</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;4&quot;</span><span style="color:#5fb3b3;">&gt;  
</span><span>  </span><span style="color:#5fb3b3;">&lt;</span><span style="color:#eb606b;">files</span><span style="color:#5fb3b3;">&gt;  
</span><span>    </span><span style="color:#5fb3b3;">&lt;</span><span style="color:#eb606b;">src </span><span style="color:#bb80b3;">top</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;true&quot;</span><span style="color:#5fb3b3;">&gt;</span><span>alchitryTop.luc</span><span style="color:#5fb3b3;">&lt;/</span><span style="color:#eb606b;">src</span><span style="color:#5fb3b3;">&gt;  
</span><span>    </span><span style="color:#5fb3b3;">&lt;</span><span style="color:#eb606b;">constraint </span><span style="color:#bb80b3;">lib</span><span style="color:#5fb3b3;">=</span><span style="color:#77bf0a;">&quot;true&quot;</span><span style="color:#5fb3b3;">&gt;</span><span>alchitry.acf</span><span style="color:#5fb3b3;">&lt;/</span><span style="color:#eb606b;">constraint</span><span style="color:#5fb3b3;">&gt;  
</span><span>    </span><span style="color:#5fb3b3;">&lt;</span><span style="color:#eb606b;">component</span><span style="color:#5fb3b3;">&gt;</span><span>resetConditioner.luc</span><span style="color:#5fb3b3;">&lt;/</span><span style="color:#eb606b;">component</span><span style="color:#5fb3b3;">&gt;  
</span><span>  </span><span style="color:#5fb3b3;">&lt;/</span><span style="color:#eb606b;">files</span><span style="color:#5fb3b3;">&gt;  
</span><span style="color:#5fb3b3;">&lt;/</span><span style="color:#eb606b;">project</span><span style="color:#5fb3b3;">&gt;
</span></code></pre>
<p>Here's the same project in the new JSON format.</p>
<pre data-lang="json" style="background-color:#282828;color:#ffffff;" class="language-json "><code class ="language-json" data-lang="json"><span>{  
</span><span>    </span><span style="color:#77bf0a;">&quot;template&quot;</span><span>: {  
</span><span>        </span><span style="color:#77bf0a;">&quot;name&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Base Project&quot;</span><span>,  
</span><span>        </span><span style="color:#77bf0a;">&quot;description&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Minimum boilerplate project for Alchitry boards&quot;</span><span>,  
</span><span>        </span><span style="color:#77bf0a;">&quot;boards&quot;</span><span>: [</span><span style="color:#77bf0a;">&quot;Au&quot;</span><span>, </span><span style="color:#77bf0a;">&quot;Au+&quot;</span><span>, </span><span style="color:#77bf0a;">&quot;Cu&quot;</span><span>],  
</span><span>        </span><span style="color:#77bf0a;">&quot;priority&quot;</span><span>: </span><span style="color:#a269dc;">0  
</span><span>    },  
</span><span>    </span><span style="color:#77bf0a;">&quot;project&quot;</span><span>: {  
</span><span>        </span><span style="color:#77bf0a;">&quot;type&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;V1.0&quot;</span><span>,  
</span><span>        </span><span style="color:#77bf0a;">&quot;projectName&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Base&quot;</span><span>,  
</span><span>        </span><span style="color:#77bf0a;">&quot;board&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Alchitry Au&quot;</span><span>,  
</span><span>        </span><span style="color:#77bf0a;">&quot;sourceFiles&quot;</span><span>: [  
</span><span>            {  
</span><span>                </span><span style="color:#77bf0a;">&quot;file&quot;</span><span>: {  
</span><span>                    </span><span style="color:#77bf0a;">&quot;type&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;DiskFile&quot;</span><span>,  
</span><span>                    </span><span style="color:#77bf0a;">&quot;path&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;source/alchitryTop.luc&quot;  
</span><span>                },  
</span><span>                </span><span style="color:#77bf0a;">&quot;top&quot;</span><span>: </span><span style="color:#a269dc;">true  
</span><span>            },  
</span><span>            {  
</span><span>                </span><span style="color:#77bf0a;">&quot;file&quot;</span><span>: {  
</span><span>                    </span><span style="color:#77bf0a;">&quot;type&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Component&quot;</span><span>,  
</span><span>                    </span><span style="color:#77bf0a;">&quot;path&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Conditioning/resetConditioner.luc&quot;  
</span><span>                }  
</span><span>            }  
</span><span>        ],  
</span><span>        </span><span style="color:#77bf0a;">&quot;constraintFiles&quot;</span><span>: [  
</span><span>            {  
</span><span>                </span><span style="color:#77bf0a;">&quot;file&quot;</span><span>: {  
</span><span>                    </span><span style="color:#77bf0a;">&quot;type&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Component&quot;</span><span>,  
</span><span>                    </span><span style="color:#77bf0a;">&quot;path&quot;</span><span>: </span><span style="color:#77bf0a;">&quot;Constraints/alchitry.acf&quot;  
</span><span>                }  
</span><span>            }  
</span><span>        ]  
</span><span>    }  
</span><span>}
</span></code></pre>
<p>The sample above includes the <code>template</code> section that only exists on example projects and is stripped off before being saved as a user project. The idea behind this is the same as adding the JSON section to the components. All the template information used to be in a rigid directory structure and XML files.</p>
<p>The old version didn't allow for sharing an example project across multiple boards. The new one, as you probably noticed, allows for a list of compatible boards to be specified.</p>
<p>The <code>priority</code> field is used to sort them for the UI.</p>
<p>As I alluded to, all of this is done using KSerializer so the conversion to/from JSON is largely free. There was a lot of ugly code that converted projects to/from XML that is no longer needed.</p>
<p>In 2.0.7, the XML project reader is still there so it will automatically convert your project to JSON, but it will be removed at some point so the XML parser dependency can be removed.</p>
<h3 id="undefinedvalues">UndefinedValues<a class="anchor" aria-hidden="true" href="#undefinedvalues" hidden="">#</a>
</h3>
<p>Finally, the biggest update is in how <code>UndefinedValues</code> are  handled.</p>
<p>Without writing 10 more pages I'll try to give a quick overview of how values are represented in Alchitry Labs.</p>
<p>Something like the value <code>10</code> is represented as a <code>BitListValue</code>. That is, a list of bits. It is well defined, consisting of four bits with known values. It is also marked as constant and unsigned.</p>
<p>If you have a single bit, it is represented as a <code>BitValue</code>. This is basically the same as a <code>BitListValue</code> but can only represent a single bit.</p>
<p>Both of these are grouped into the <code>SimpleValue</code> class which represents basic <em>number</em> values.</p>
<p>In Lucid, you can pack multiple <code>SimpleValue</code> values into arrays or structs. To represent these, there are <code>ArrayValue</code> and <code>StructValue</code> classes.</p>
<p>For a while now, these have been well implement. However, there is one other type of <code>Value</code>, the <code>UndefinedValue</code>. </p>
<p>So what exactly is an <code>UndefinedValue</code>? The only time this is used when there isn't a syntax error, is during a standalone error checking pass of a module with a parameter that doesn't have a default or test value. Follow all that? Great!</p>
<p>Here's an example.</p>
<pre data-lang="lucid" style="background-color:#282828;color:#ffffff;" class="language-lucid "><code class ="language-lucid" data-lang="lucid"><span style="font-weight:bold;color:#faac1f;">module</span><span> counter </span><span style="color:#ed4343;">#(
</span><span>    </span><span style="color:#d45ada;">SIZE </span><span style="color:#ed4343;">: </span><span style="color:#d45ada;">SIZE </span><span style="color:#ed4343;">&gt; </span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">, </span><span style="color:#969696;">// Width of the output
</span><span>    </span><span style="color:#d45ada;">DIV </span><span style="color:#ed4343;">= </span><span style="color:#a269dc;">0  </span><span style="color:#ed4343;">: </span><span style="color:#d45ada;">DIV </span><span style="color:#ed4343;">&gt;= </span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">, </span><span style="color:#969696;">// number of bits to use as divisor
</span><span>    </span><span style="color:#d45ada;">TOP </span><span style="color:#ed4343;">= </span><span style="color:#a269dc;">0  </span><span style="color:#ed4343;">: </span><span style="color:#d45ada;">TOP </span><span style="color:#ed4343;">&gt;= </span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">, </span><span style="color:#969696;">// max value, 0 = none
</span><span>
</span><span>    </span><span style="color:#969696;">// direction to count, use 1 for up and 0 for down
</span><span>    </span><span style="color:#d45ada;">UP </span><span style="color:#ed4343;">= </span><span style="color:#a269dc;">1 </span><span style="color:#ed4343;">: </span><span style="color:#d45ada;">UP </span><span style="color:#ed4343;">== </span><span style="color:#a269dc;">1 </span><span style="color:#ed4343;">|| </span><span style="color:#d45ada;">UP </span><span style="color:#ed4343;">== </span><span style="color:#a269dc;">0
</span><span style="color:#ed4343;">)(
</span><span>    </span><span style="color:#0a8dbf;">input</span><span> clk</span><span style="color:#ed4343;">,
</span><span>    </span><span style="color:#0a8dbf;">input</span><span> rst</span><span style="color:#ed4343;">,
</span><span>    </span><span style="color:#0a8dbf;">output</span><span> value</span><span style="color:#ed4343;">[</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">]
</span><span style="color:#ed4343;">) {
</span><span>
</span><span>    .clk</span><span style="color:#ed4343;">(</span><span>clk</span><span style="color:#ed4343;">),</span><span> .rst</span><span style="color:#ed4343;">(</span><span>rst</span><span style="color:#ed4343;">) {
</span><span>        </span><span style="color:#0a8dbf;">dff</span><span> ctr</span><span style="color:#ed4343;">[</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">+</span><span style="color:#d45ada;">DIV</span><span style="color:#ed4343;">]
</span><span>    </span><span style="color:#ed4343;">}
</span><span>
</span><span>    </span><span style="color:#0a8dbf;">const </span><span style="color:#d45ada;">MAX_VALUE </span><span style="color:#ed4343;">= </span><span style="color:#d45ada;">TOP </span><span style="color:#ed4343;">&lt;&lt; </span><span style="color:#d45ada;">DIV </span><span style="color:#969696;">// value when maxed out
</span><span>
</span><span>    </span><span style="font-weight:bold;color:#0abfbf;">always </span><span style="color:#ed4343;">{
</span><span>        value </span><span style="color:#ed4343;">=</span><span> ctr.q</span><span style="color:#ed4343;">[</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">+</span><span style="color:#d45ada;">DIV</span><span style="color:#ed4343;">-</span><span style="color:#a269dc;">1</span><span style="color:#ed4343;">-:</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">] </span><span style="color:#969696;">// set the output
</span><span>
</span><span>        </span><span style="font-weight:bold;color:#0abfbf;">if </span><span style="color:#ed4343;">(</span><span style="color:#d45ada;">UP</span><span style="color:#ed4343;">) { </span><span style="color:#969696;">// when this is an up counter
</span><span>            ctr.d </span><span style="color:#ed4343;">=</span><span> ctr.q </span><span style="color:#ed4343;">+ </span><span style="color:#a269dc;">1 </span><span style="color:#969696;">// increase
</span><span>            </span><span style="font-weight:bold;color:#0abfbf;">if </span><span style="color:#ed4343;">(</span><span style="color:#d45ada;">TOP </span><span style="color:#ed4343;">!= </span><span style="color:#a269dc;">0 </span><span style="color:#ed4343;">&amp;&amp;</span><span> ctr.q </span><span style="color:#ed4343;">== </span><span style="color:#d45ada;">MAX_VALUE</span><span style="color:#ed4343;">) { </span><span style="color:#969696;">// reached the top?
</span><span>                ctr.d </span><span style="color:#ed4343;">= </span><span style="color:#a269dc;">0 </span><span style="color:#969696;">// reset
</span><span>            </span><span style="color:#ed4343;">}
</span><span>        </span><span style="color:#ed4343;">} </span><span style="font-weight:bold;color:#0abfbf;">else </span><span style="color:#ed4343;">{ </span><span style="color:#969696;">// down counter
</span><span>            ctr.d </span><span style="color:#ed4343;">=</span><span> ctr.q </span><span style="color:#ed4343;">- </span><span style="color:#a269dc;">1 </span><span style="color:#969696;">// decrease
</span><span>            </span><span style="font-weight:bold;color:#0abfbf;">if </span><span style="color:#ed4343;">(</span><span style="color:#d45ada;">TOP </span><span style="color:#ed4343;">!= </span><span style="color:#a269dc;">0 </span><span style="color:#ed4343;">&amp;&amp;</span><span> ctr.q </span><span style="color:#ed4343;">== </span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">) { </span><span style="color:#969696;">// reached the bottom?
</span><span>                ctr.d </span><span style="color:#ed4343;">= </span><span style="color:#d45ada;">MAX_VALUE </span><span style="color:#969696;">// reset to top
</span><span>            </span><span style="color:#ed4343;">}
</span><span>        </span><span style="color:#ed4343;">}
</span><span>    </span><span style="color:#ed4343;">}
</span><span style="color:#ed4343;">}
</span></code></pre>
<p>The parameter <code>SIZE</code> doesn't have a default or test value so it will be assigned an <code>UndefinedValue</code> that has an <code>UndefinedSimpleWidth</code>. That means that it will be assumed to be a simple number, not an array or struct.</p>
<p>The issue is that this <code>UndefinedValue</code> will propagate through the parse. For example, the output <code>value</code> is an array of size <code>SIZE</code>. But <code>SIZE</code> is undefined so we don't actually know how big <code>value</code> is.</p>
<p>This means <code>value</code> will be an <code>UndefinedValue</code> with a width of <code>UndefinedArrayWidth</code>. Most values have their width defined simply by their value. In other words, a <code>BitListValue</code> of four bits has a <code>BitListWidth</code> with size four (a class that just holds the number of bits). However, <code>UndefinedValue</code> can have any width that may or may not be known.</p>
<p>Keeping track of the width helps with providing errors. For example, if we tried to use something that had a width of <code>UndefinedArrayWidth</code> where an array can't be used, we can provide an error before the module is instantiated.</p>
<p>All of this was implement in 2.0.7 and fairly well tested through <a href="https://github.com/alchitry/Alchitry-Labs-V2/blob/cb8faec1a29bb65730e17c26c32177c2a66dc487/src/test/kotlin/UndefinedValueTests.kt">these tests</a>.</p>
<p>The propagation of <code>UndefinedValue</code> through an error checking parse means there isn't a ton of information for the IDE to use to provide you with meaningful feedback until your module is instantiated and the value is no longer undefined.</p>
<p>You can avoid all this by simply providing a test value using the <code>~</code> operator.</p>
<pre data-lang="lucid" style="background-color:#282828;color:#ffffff;" class="language-lucid "><code class ="language-lucid" data-lang="lucid"><span>    </span><span style="color:#d45ada;">SIZE </span><span style="color:#ed4343;">~ </span><span style="color:#a269dc;">8 </span><span style="color:#ed4343;">: </span><span style="color:#d45ada;">SIZE </span><span style="color:#ed4343;">&gt; </span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">, </span><span style="color:#969696;">// Width of the output
</span></code></pre>
<p>This says that <code>8</code> is a reasonable test value for <code>SIZE</code> but shouldn't be used as a default value. In contrast to using <code>=</code>, a value for <code>SIZE</code> will still be required when someone instantiates this module.</p>
<p>This is a new Lucid V2 feature.</p>

    </div>
    

    <footer class="post-footer">
        

        
        



<nav class="paginav">
    
        
        <a class="prev" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;alchitry-labs-v2-0-5-simulations&#x2F;">
            <span class="title">« Prev</span>
            <br>
            <span>Alchitry Labs V2.0.5 - Simulations</span>
        </a>
        
        
        <a class="next" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;lucid-1-vs-2&#x2F;">
            <span class="title">Next »</span>
            <br>
            <span>Lucid V1 to V2</span>
        </a>
        
    
</nav>


        
        
    </footer>

</article>

    </main>
    
    <footer class="footer">
    <div>
        <div class="social-icons">
    
    <a href="https:&#x2F;&#x2F;github.com&#x2F;alchitry" target="_blank" rel="noopener noreferrer me" title="GitHub">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>


    </a>
    
    <a href="https:&#x2F;&#x2F;youtube.com&#x2F;c&#x2F;alchitry" target="_blank" rel="noopener noreferrer me" title="YouTube">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z">
    </path>
    <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
</svg>


    </a>
    
    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;atom.xml" target="_blank" rel="noopener noreferrer me" title="RSS">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>


    </a>
    
</div>

        <span>&copy; 2025 <a href="https:&#x2F;&#x2F;alchitry.com">Alchitry</a></span>
    </div>
</footer>


<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z"/>
    </svg>
</a>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>


<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>


<script>
    /* Open */
    function openNav() {
        document.getElementById("overlayNav").style.display = "block";
    }

    /* Close */
    function closeNav() {
        document.getElementById("overlayNav").style.display = "none";
    }
</script>



<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            // td containing LineNos
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            // table containing LineNos and code
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            // code blocks not having highlight as parent class
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script type="text/javascript" src="https://alchitry.com/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://alchitry.com/search.js"></script>
    
</body>
</html>
