<!DOCTYPE html>
<html lang="en" dir="auto">
<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Alchitry Labs V2.0.13 - Verilog Interoperability</title>


<meta name="keywords" content="keyword1, keyword2, keyword3">



<meta name="description" content="">



<meta name="author" content="Justin Rajewski">


<link rel="canonical" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;alchitry-labs-v2-0-13-verilog&#x2F;">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://alchitry.com/css/styles.css">
<link rel="stylesheet" href="https://alchitry.com/css/override.css">


<link rel="icon" href="https://alchitry.com/favicon.svg" type="image/svg+xml">
<link rel="icon" type="image/png" sizes="16x16" href="https://alchitry.com/favicon_16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://alchitry.com/favicon_32.png">
<link rel="apple-touch-icon" href="https://alchitry.com/apple-touch-icon.png"><!-- 180×180 -->
<meta name="theme-color" content="#333333">


<link rel="alternate" type="application/atom+xml" title="RSS" href="https://alchitry.com/atom.xml">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
    
</noscript>



    
</head>
<body class=" dark" id="top">
    
    
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"/>

<header class="header">

    <nav class="nav">
        <div class="logo">
            <a href="https:&#x2F;&#x2F;alchitry.com" accesskey="h" title="Alchitry (Alt + H)"><img src="https://alchitry.com/alchitry.svg"
                                                         alt="Alchitry"
                                                         aria-label="Alchitry">
            </a>
        </div>
        
        <div id="nav-search">
            <ul id="menu" class="desktop-nav">
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;shop.alchitry.com&#x2F;collections&#x2F;products" title="Boards">
                        <span>Boards</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;news" title="News">
                        <span>News</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;tutorials" title="Tutorials">
                        <span>Tutorials</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;alchitry-labs" title="Alchitry Labs">
                        <span>Alchitry Labs</span>
                        
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;forum.alchitry.com" title="Forum">
                        <span>Forum</span>
                        
                    </a>
                </li>
                
            </ul>
            <div class="search-container">
                <input class="search" type="search" placeholder="Search" autocomplete="off">
                <span class="material-symbols-outlined search-icon">search</span>

                <div class="search-results">
                    <div class="search-results__items"></div>
                </div>
            </div>
        </div>
        <div id="overlayNavOpen">
            <span onclick="openNav()" class="material-symbols-outlined">menu</span>
        </div>
        
    </nav>
</header>


<div id="overlayNav" class="overlay">
    <div class="overlay-header">
        <div class="search-container">
            <input class="search" type="search" placeholder="Search" autocomplete="off">
            <span class="material-symbols-outlined search-icon">search</span>

            <div class="search-results">
                <div class="search-results__items"></div>
            </div>
        </div>
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    </div>

    <div class="overlay-content">
        
        
        
        <a href="https:&#x2F;&#x2F;shop.alchitry.com&#x2F;collections&#x2F;products" title="Boards">
            <span>Boards</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;news" title="News">
            <span>News</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;tutorials" title="Tutorials">
            <span>Tutorials</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;alchitry-labs" title="Alchitry Labs">
            <span>Alchitry Labs</span>
            
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;forum.alchitry.com" title="Forum">
            <span>Forum</span>
            
        </a>
        
    </div>
</div>

    
    <main class="main">
        
<article class="post-single">
    <header class="post-header">
        <div class="breadcrumbs">
            
            <div class="breadcrumb-container">
                <a class="breadcrumb-path" href="/">Home</a>
                
                
                
                
                
                <span class="breadcrumb-separator">»</span>
                
                <a class="breadcrumb-path" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;">News</a>
                
                <span class="breadcrumb-separator">»</span>
                <a class="breadcrumb-path active" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;alchitry-labs-v2-0-13-verilog&#x2F;">Alchitry Labs V2.0.13 - Verilog Interoperability</a>
            </div>
            
        </div>
        <h1 class="post-title">Alchitry Labs V2.0.13 - Verilog Interoperability</h1>
        
        
        <div class="post-meta">
            
















<span>2024-08-28</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Justin Rajewski

            &nbsp;|&nbsp;&nbsp;<a href="https:&#x2F;&#x2F;github.com&#x2F;alchitry&#x2F;alchitry.github.io&#x2F;tree&#x2F;master/content/news&#x2F;alchitry-labs-v2.0.13-verilog.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

        </div>
        
    </header>

    
    

<div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner">
            <ul>
                
                <li>
                    <a href="#verilog-interoperability" aria-label="Verilog Interoperability">Verilog Interoperability</a>
                    
                </li>
                
                <li>
                    <a href="#string-indexing" aria-label="String Indexing">String Indexing</a>
                    
                </li>
                
                <li>
                    <a href="#build-flow" aria-label="Build Flow">Build Flow</a>
                    
                </li>
                
                <li>
                    <a href="#" aria-label=""></a>
                    
                </li>
                
                <li>
                    <a href="#beta-release" aria-label="Beta Release">Beta Release</a>
                    
                </li>
                
            </ul>
        </div>
    </details>
</div>


    

    
    <div class="post-content">
        <p>Today version <a href="https://github.com/alchitry/Alchitry-Labs-V2/releases/tag/2.0.13">V2.0.13</a> of Alchitry Labs was released!</p>
<h1 id="verilog-interoperability">Verilog Interoperability<a class="anchor" aria-hidden="true" href="#verilog-interoperability" hidden="">#</a>
</h1>
<p>A ton has changed/been added since the last post about <a href="https://alchitry.com/news/alchitry-labs-v2-0-8/">V2.0.8</a>.</p>
<p>The biggest feature, by far, is the addition of Verilog interoperability.</p>
<p>You can now add Verilog modules and instantiate them from Lucid. This was an important missing feature to allow for vendor specific things to be easily integrated into Lucid projects.</p>
<p>For example, in a Verilog module, you can instantiate the primitives outlined in <a href="https://docs.amd.com/viewer/book-attachment/Lz7t3FLJuzYlv9pBdksO6Q/ob7lIrXtxRMJLY4I6UEprg">UG953</a> for the Au/Au+. This is important for stuff like the upcoming <em>Alchitry Hd</em> that utilizes the <code class ="language-lucid" data-lang="lucid"><span style="color:#d45ada;">OSERDESE2</span></code> primitive to output HDMI video data.</p>
<p>While the entire Verilog module is checked for syntax error in the editor, Alchitry Labs doesn't look at the content inside the Verilog modules. It only ever looks at the module interface (parameters and ports).</p>
<p>This means that Verilog inside Alchitry Labs has a lot less guards in place and should only really be used as glue to existing Verilog.</p>
<p>It also has the major downside that Verilog modules are essentially ignored during simulations.</p>
<h1 id="string-indexing">String Indexing<a class="anchor" aria-hidden="true" href="#string-indexing" hidden="">#</a>
</h1>
<p>To make Verilog smoothly interoperate with Lucid, the indexing for strings was reverted to how it worked in Lucid V1. That is, the right-most letter is index 0 instead of the left-most.</p>
<p>For example, the string <code class ="language-lucid" data-lang="lucid"><span style="color:#77bf0a;">&quot;Hello&quot;</span></code> in Lucid is represented as an <code class ="language-lucid" data-lang="lucid"><span style="color:#ed4343;">[</span><span style="color:#a269dc;">5</span><span style="color:#ed4343;">][</span><span style="color:#a269dc;">8</span><span style="color:#ed4343;">]</span></code> array where index <code class ="language-lucid" data-lang="lucid"><span style="color:#ed4343;">[</span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">]</span></code> points to <code class ="language-lucid" data-lang="lucid"><span style="color:#77bf0a;">&quot;o&quot;</span></code>. In V2.0.12 and earlier, index <code class ="language-lucid" data-lang="lucid"><span style="color:#ed4343;">[</span><span style="color:#a269dc;">0</span><span style="color:#ed4343;">]</span></code> pointed to <code class ="language-lucid" data-lang="lucid"><span style="color:#77bf0a;">&quot;H&quot;</span></code>.</p>
<p>You can use the <code class ="language-lucid" data-lang="lucid"><span style="color:#1bddaf;">$reverse</span><span style="color:#ed4343;">()</span></code> function to restore the indexing to the previous behavior.</p>
<p>Verilog uses the right-side indexing so it now matches. This was important for passing strings as parameters which is often done with Xilinx's primitives. Before this change, the Verilog side would see the strings as reversed causing them not to be recognized.</p>
<p>While having the right side of string be index 0 seems a little strange, it does nicely match how arrays and everything else are indexed. Now, the right side is always index 0.</p>
<h1 id="build-flow">Build Flow<a class="anchor" aria-hidden="true" href="#build-flow" hidden="">#</a>
</h1>
<p>The way projects are built underwent a huge change. Previously, when building a project, the tools would start with the top-level module and build out a tree of all instantiated modules underneath it. This has the huge benefit of knowing what all the parameter values are as they <strong>must</strong> be specified at this point.</p>
<p>The big downside of this, is that a separate Verilog translation needs to happen for every different combination of parameters on a module. For example, if you used a counter module and set it's parameter <code class ="language-lucid" data-lang="lucid"><span style="color:#ed4343;">#</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">(</span><span style="color:#a269dc;">8</span><span style="color:#ed4343;">)</span></code> but in another location used the counter with <code class ="language-lucid" data-lang="lucid"><span style="color:#ed4343;">#</span><span style="color:#d45ada;">SIZE</span><span style="color:#ed4343;">(</span><span style="color:#a269dc;">16</span><span style="color:#ed4343;">)</span></code> then two separate Verilog modules would have been generated.</p>
<p>This was a fairly small downside to making all constant values calculable when converting to Verilog. However, it has the big downside of making it impossible to call a Lucid module directly from Verilog.</p>
<p>In the new version, each module is translated to Verilog in isolation properly using parameters. </p>
<p>This makes it possible for Lucid modules to be used inside Verilog modules.</p>
<p>It also likely helps the build tools to do things more optimally.</p>
<h1 id=""><code class ="language-lucid" data-lang="lucid"><span style="color:#1bddaf;">$isSim</span><span style="color:#ed4343;">()</span></code><a class="anchor" aria-hidden="true" href="#" hidden="">#</a>
</h1>
<p>A new function, <code class ="language-lucid" data-lang="lucid"><span style="color:#1bddaf;">$isSim</span><span style="color:#ed4343;">()</span></code>, was introduced. This function evaluates to <code class ="language-lucid" data-lang="lucid"><span style="color:#a269dc;">1b1</span></code> if running in an interactive simulation and <code class ="language-lucid" data-lang="lucid"><span style="color:#a269dc;">1b0</span></code> otherwise.</p>
<p>This is useful for dealing with the <em>much</em> slower clock speeds when running an interactive simulation (usually around 1,000 Hz instead of 100,000,000 Hz).</p>
<p>For example, providing a different <code class ="language-lucid" data-lang="lucid"><span style="color:#d45ada;">DIV</span></code> parameter value to a <code class ="language-lucid" data-lang="lucid"><span>multiSevenSeg</span></code> module with the following makes the display work well in simulation and builds.</p>
<pre data-lang="lucid" style="background-color:#282828;color:#ffffff;" class="language-lucid "><code class ="language-lucid" data-lang="lucid"><span>multiSevenSeg seg </span><span style="color:#ed4343;">(#</span><span style="color:#d45ada;">DIV</span><span style="color:#ed4343;">(</span><span style="color:#1bddaf;">$isSim</span><span style="color:#ed4343;">() ? </span><span style="color:#a269dc;">1 </span><span style="color:#ed4343;">: </span><span style="color:#a269dc;">16</span><span style="color:#ed4343;">))
</span></code></pre>
<p>Note that <code class ="language-lucid" data-lang="lucid"><span style="color:#1bddaf;">$isSim</span><span style="color:#ed4343;">()</span></code> evaluates to <code class ="language-lucid" data-lang="lucid"><span style="color:#a269dc;">1b0</span></code> during test benches.</p>
<h1 id="beta-release">Beta Release<a class="anchor" aria-hidden="true" href="#beta-release" hidden="">#</a>
</h1>
<p>Things are getting pretty close to the release of V2.1.0 which will mark the first beta release.</p>
<p>Check out the <a href="https://github.com/alchitry/Alchitry-Labs-V2/issues?q=is%3Aopen+is%3Aissue+milestone%3A%222.1.0+Beta+Release%22">V2.1.0 Milestone on GitHub</a> to track the remaining features to be added before the release.</p>
<p>If you're using the preview builds and run into any issues, be sure to report them on <a href="https://github.com/alchitry/Alchitry-Labs-V2/issues">GitHub</a> so I can get them fixed ASAP!</p>

    </div>
    

    <footer class="post-footer">
        

        
        



<nav class="paginav">
    
        
        <a class="prev" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;alchitry-labs-v2-0-8&#x2F;">
            <span class="title">« Prev</span>
            <br>
            <span>Alchitry Labs V2.0.8</span>
        </a>
        
        
        <a class="next" href="https:&#x2F;&#x2F;alchitry.com&#x2F;news&#x2F;alchitry-labs-v2-beta&#x2F;">
            <span class="title">Next »</span>
            <br>
            <span>Alchitry Labs V2 - Now in Beta!</span>
        </a>
        
    
</nav>


        
        
    </footer>

</article>

    </main>
    
    <footer class="footer">
    <div>
        <div class="social-icons">
    
    <a href="https:&#x2F;&#x2F;github.com&#x2F;alchitry" target="_blank" rel="noopener noreferrer me" title="GitHub">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>


    </a>
    
    <a href="https:&#x2F;&#x2F;youtube.com&#x2F;c&#x2F;alchitry" target="_blank" rel="noopener noreferrer me" title="YouTube">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z">
    </path>
    <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
</svg>


    </a>
    
    <a href="https:&#x2F;&#x2F;alchitry.com&#x2F;atom.xml" target="_blank" rel="noopener noreferrer me" title="RSS">
        

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>


    </a>
    
</div>

        <span>&copy; 2025 <a href="https:&#x2F;&#x2F;alchitry.com">Alchitry</a></span>
    </div>
</footer>


<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z"/>
    </svg>
</a>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>


<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>


<script>
    /* Open */
    function openNav() {
        document.getElementById("overlayNav").style.display = "block";
    }

    /* Close */
    function closeNav() {
        document.getElementById("overlayNav").style.display = "none";
    }
</script>



<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            // td containing LineNos
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            // table containing LineNos and code
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            // code blocks not having highlight as parent class
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script type="text/javascript" src="https://alchitry.com/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://alchitry.com/search.js"></script>
    
</body>
</html>
